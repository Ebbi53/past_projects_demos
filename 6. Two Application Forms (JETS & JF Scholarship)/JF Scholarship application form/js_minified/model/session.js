define(["jquery","underscore","backbone","core-js/modules/es6.promise","core-js/modules/es6.object.to-string","core-js/modules/web.dom.iterable","regenerator-runtime/runtime","_asyncToGenerator","api_config"],function(a,b,c,d,e,f,g,h,i){// function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
// function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
var j=c.Model.extend({url:i.protocol+i.domain+i.path+"applicationtoken",defaults:{applicationtoken:"",uuid:""// complete: false
},update:function(){var a=h(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,d,e,f=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b=!1,d=/*#__PURE__*/regeneratorRuntime.mark(function a(c){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,new Promise(function(a){f.fetch({success:function(){b=!0,a()},error:function(){var b=h(/*#__PURE__*/regeneratorRuntime.mark(function b(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:a(),console.log("Try "+c+": Token renew failed");case 2:case"end":return b.stop();}},b)}));return function(){return b.apply(this,arguments)}}()})});case 2:case"end":return a.stop();}},a)}),e=0;case 3:if(!(2>e)||b){a.next=8;break}return a.delegateYield(d(e),"t0",5);case 5:e++,a.next=3;break;case 8:if(!b){a.next=11;break}return c.Events.trigger("showError","sessionTimeOut"),a.abrupt("return",!0);case 11:return a.abrupt("return",!1);case 12:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}()});return new j});